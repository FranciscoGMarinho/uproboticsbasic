<!DOCTYPE html>
<html>

<head>
    <meta name="description" content="Blockly for arduino">
    <meta name="keywords" content="arduino, Unplugged robotics, blocklys">
    <meta name="author" content="Francisco Gabriel">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta charset="UTF-8">
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="css/materialize.min.css" media="screen,projection" />
    <link type="text/css" rel="stylesheet" href="css/robotics.css" media="screen,projection" />
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <!--Let browser know website is optimized for mobile-->
    <title>Unplugged Robotics</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <!--blocklys-->
    <script src="blockly/blockly_compressed.js"></script>
    <script src="blockly/blocks_compressed.js"></script>
    <script src="blockly/javascript_compressed.js"></script>
    <script src="blockly/msg/js/en.js"></script>
    <script src="blockly/tudo.js"></script>
    <script src="blockly/blocos_up.js"></script>
    <script src="blockly/wo.js"></script>    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init();
    </script>
</head>

<style>
    .clearfix {
        overflow: auto;
    }
</style>




<body>





    <ul id="tabs-swipe-demo" class="tabs">
        <li class="tab col s3"><a href="#swipe-1"><i class="tiny material-icons active" style="margin-right: 4px;">pan_tool</i>Braço Robótico</a></li>
      <!-- <li class="tab col s3"><a href="#swipe-2"><i class="tiny material-icons" style="margin-right: 2px;">wb_incandescent</i>LED</a></li>
        <li class="tab col s3"><a href="#swipe-3"><i class="tiny material-icons" style="margin-right: 2px;">settings_remote</i>Sensores</a></li> -->
    </ul>

    <div class="col s12" style="height: 500px">
        <div class="row">
            <div class="col s8" style="height: 500px">
                <div id="blocklyDiv" style="float:left; height: 500px; width: 100%;border-style: solid; border-color: #E5E7E9;">
                </div>
            </div>
            <div class="col s4">
                <div id="teste" style="font-family: 'Courier New', Courier, monospace; float:left; height: 500px; width: 100%; padding-left: 2%;background-color: #FFFFFF;
    	         color: #ffffff; border-style: solid; border-color: #E5E7E9;" class="clearfix">
                </div>
            </div>
        </div>
    </div>

 <!--   <div id="swipe-2" class="col s12 " style="height: 500px; background-color: whitesmoke">Em construção!</div>
    <div id="swipe-3" class="col s12 " style="height: 500px;background-color: rgb(255, 233, 233)">Em breve!</div>
 -->








    <xml id="toolbox" style="display: none">

	 

        <category name="Movimentos" colour="270">
			<block type="init_arm"></block>
			<block type="garra_fechar_pos"></block>
            <block type="garra_abrir_pos"></block>
            <block type="girar_esquerda"></block>
            <block type="girar_direita"></block>
            <block type="altura_pos"></block>
            <block type="angulo_pos"></block>
        </category>
		
		 <category name="Funções" colour="195">
		 	<block type="import_controls"></block>
			<block type="import_functions"></block>
		 </category>
		
        <category name="Controle" colour="300">
            <block type="metodo_loop"></block>
        </category>
       
        <category name="Arduino" colour="160">
			<block type="definir_portas"></block>
        </category>
     
 
    </xml>

    <script>
        var vrau = "nothing here";
        var workspace = Blockly.inject('blocklyDiv', {
            toolbox: document.getElementById('toolbox')
        });

        function update(event) {
            Blockly.JavaScript.INFINITE_LOOP_TRAP = null;
            var code = new String(Blockly.JavaScript.workspaceToCode(workspace));
            if (code != "") {
                vrau = code;
                document.getElementById("teste").innerHTML = vrau;
                cleanThanUp()
            }
        }

        function cleanThanUp() {
            var list = document.getElementById("im");
            while (list.hasChildNodes()) {
                list.removeChild(list.childNodes[0]);
            }
            updateGraph();
        }

        function updateGraph() {
            if (vrau != "nothing here") {
                var viz = new Viz();
                viz.renderSVGElement(vrau)
                    .then(function(element) {
                        document.getElementById("im").appendChild(element);
                    })
                    .catch(error => {
                        // Create a new Viz instance (@see Caveats page for more info)
                        viz = new Viz();

                        // Possibly display the error
                        console.error(error);
                    });
            }
        }
        workspace.addChangeListener(update);
    </script>

    <script>
        $(document).ready(function() {
            $('ul.tabs').tabs({
                swipeable: true,
                responsiveThreshold: 1920
            });
        });
    </script>

    <!--JavaScript at end of body for optimized loading-->
    <script type="text/javascript" src="js/materialize.min.js"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <!--<script type="text/javascript" src="js/code.js"></script>-->
    <script type="text/javascript" src="js/FileSaver.js"></script>
    <script type="text/javascript" src="js/prettify.js"></script>
    <script type="text/javascript" src="js/jquery.mousewheel.min.js"></script>
</body>

</html>